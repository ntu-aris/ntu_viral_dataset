{%- assign workspace_files = html_files | where_exp: "item", "item.dir == page.dir" -%}

{%- assign index = 0 -%}
{%- for item in workspace_files %}
    {%- if item.url == page.url %}
        {%- assign index = forloop.index -%}
    {%- endif %}
{%- endfor -%}

{%- for item in workspace_files -%}
    {%- assign index_prev = index | minus: 1 -%}
    {%- assign index_next = index | plus: 1 -%}
    {%- if forloop.index == index_prev -%}
        {%- assign prev = item -%}
    {%- endif %}
    {%- if forloop.index == index_next and page.url != page.dir -%}
        {%- assign next = item -%}
    {%- endif %}
{%- endfor -%}
